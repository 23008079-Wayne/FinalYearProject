<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="FinanceAI - Stock watchlist with market calendar and insights">     
    <title>FinanceAI - Watchlist, Calendar & Insights</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <nav>
        <div class="nav-container">
            <div class="nav-logo"> FinanceAI</div>
            <ul class="nav-menu">
                <li><a href="#watchlist" class="active">Watchlist</a></li>
                <li><a href="#calendar">Calendar</a></li>
                <li><a href="#insights">Insights</a></li>
                <li><a href="portfolio.html">Portfolio</a></li>
            </ul>
        </div>
    </nav>

    <header>
        <div class="container">
            <h1> Stockmine</h1>
            <p>Track Stocks, Monitor Markets & Stay Informed</p>
        </div>
    </header>

    <main class="container">
        <!-- WATCHLIST SECTION -->
        <section class="card" id="watchlist">
            <div class="section-header">
                <h2> Watchlist</h2>
                <button class="btn btn-primary" onclick="showAddStockModal()">+ Add Stock</button>        
            </div>
            <div id="watchlistContainer" class="stock-grid"></div>
        </section>

        <!-- ECONOMIC CALENDAR SECTION -->
        <section class="card" id="calendar">
            <div class="section-header">
                <h2> Economic Calendar</h2>
                <select id="calendarFilter" class="filter-select" onchange="filterCalendarEvents()">      
                    <option value="all">All Events</option>
                    <option value="high">High Impact</option>
                    <option value="medium">Medium Impact</option>
                    <option value="low">Low Impact</option>
                </select>
            </div>
            <div id="calendarContainer" class="calendar-events"></div>
        </section>

        <!-- INSIGHTS SECTION -->
        <section class="card" id="insights">
            <div class="section-header">
                <h2> Market Insights</h2>
                <select id="insightFilter" class="filter-select" onchange="filterInsights()">
                    <option value="all">All Insights</option>
                    <option value="bullish">Bullish</option>
                    <option value="bearish">Bearish</option>
                    <option value="neutral">Neutral</option>
                </select>
            </div>

            <!-- News Sentiment Analysis (Ticker-based) -->
            <div class="news-sentiment-section">
                <h3> News Sentiment Analysis</h3>
                <p>Enter a stock ticker to fetch the latest top 5 news and analyze their sentiment</p>
                <div class="search-form" style="position: relative;">
                    <input type="text" id="tickerSearch" placeholder="Enter stock ticker (e.g., AAPL, TSLA, MSFT)" maxlength="5" oninput="handleTickerSearch()">
                    <div id="tickerAutocomplete" style="position: absolute; top: 100%; left: 0; right: 0; background: white; border: 1px solid #ddd; border-top: none; border-radius: 0 0 6px 6px; max-height: 200px; overflow-y: auto; display: none; z-index: 100;"></div>
                    <button class="btn btn-primary" onclick="searchNewsByTicker()">Search</button>
                </div>
                <div id="newsSearchContainer" style="display: none;"></div>
                <div id="newsArticlesContainer" class="news-articles-grid"></div>
            </div>

            <!-- Saved Analyses Section -->
            <div style="margin-top: 40px;">
                <h3>ðŸ“Œ Saved Analyses</h3>
                <div id="emptyAnalysesState" style="text-align: center; padding: 40px; color: #999;">
                    <p>No saved analyses yet. Search for a ticker and save your analyses to view them here.</p>
                </div>
                <div id="savedAnalysesContainer" class="insights-grid"></div>
            </div>

            <div id="insightsContainer" class="insights-grid"></div>
        </section>

        <!-- ADD STOCK MODAL -->
        <div id="addStockModal" class="modal">
            <div class="modal-content">
                <h3>Add Stock to Watchlist</h3>
                <input type="text" id="stockSymbol" placeholder="Stock Symbol (e.g., AAPL)" required>     
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="addStock()">Add</button>
                </div>
            </div>
        </div>

        <!-- SAVE ANALYSIS MODAL -->
        <div id="saveAnalysisModal" class="modal">
            <div class="modal-content">
                <h3>Save Analysis</h3>
                <div id="analysisPreview" style="margin-bottom: 20px; padding: 10px; background: #f5f5f5; border-radius: 8px;"></div>
                <textarea id="analysisNotes" placeholder="Add notes about this analysis..." style="width: 100%; height: 100px; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px; font-family: inherit;"></textarea>
                <div class="modal-actions" style="margin-top: 15px;">
                    <button class="btn btn-secondary" onclick="closeSaveModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="saveAnalysisToServer()">Save Analysis</button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2026 FinanceAI - Track. Predict. Profit | Educational Purpose Only</p>
    </footer>

    <script src="/js/app.js"></script>
</body>
</html>